import{_ as pe}from"./BQKlOPNr.js";import{e as ce,r as f,f as L,g as P,c as u,o as i,a as e,h as y,i as b,v as D,u as o,j as U,k as J,d as k,t as m,F as T,l as N,m as se,n as V,p as ae,q as me,s as ve,T as fe,x as xe,b as O,w as be,y as X,z as oe}from"./ieS4v_zz.js";import{_ as ne}from"./DlAUqK2U.js";import{u as re}from"./Cq0N2LJF.js";const R=ce("admin",()=>{const C=f(!1),l=f(!1),x=f(""),r=f("success"),g=f("gallery"),v=f("grid"),a=f("gallery"),p=f(""),t=f(""),S=f(""),_=f([]),$=f("gallery"),Y=f("grid"),E=f(""),H=f(["預設事件"]),z=f(!1),s=f(""),I=f({defaultUploadCategory:"gallery",defaultViewMode:"grid",imageQuality:90,autoBackup:!0,showImageInfo:!0,batchSize:20,theme:"light",language:"zh-TW"}),q=f(!1),F=f(null),Q=f(!1),B=f(""),W=f(null),j=f([]),G=f([]),te=L(()=>_.value.length>0&&p.value.trim()!==""),K=L(()=>$.value==="gallery"?j.value||[]:G.value||[]),Z=L(()=>g.value==="gallery"?j.value||[]:G.value||[]),ie=L(()=>{const n=K.value||[],d={};n.forEach(h=>{let w="預設事件",M="未分類作品",le="";if($.value==="photography"&&h.event){const ee=h.event;w=ee.name||"預設事件",M=ee.description||"未分類作品",le=ee.location||""}d[w]||(d[w]={eventName:w,description:M,location:le,items:[]}),d[w].items.push(h)});let c=Object.values(d).map(h=>({...h,items:h.items.sort((w,M)=>new Date(M.time).getTime()-new Date(w.time).getTime()),latestTime:Math.max(...h.items.map(w=>new Date(w.time).getTime()))})).sort((h,w)=>{const M=w.latestTime-h.latestTime;return M!==0?M:w.items.length-h.items.length});return E.value&&E.value!==""&&(c=c.filter(h=>h.eventName===E.value)),c}),de=L(()=>{const n=K.value||[],d=new Set;return n.forEach(c=>{$.value==="photography"&&c.event?d.add(c.event.name||"預設事件"):d.add("預設事件")}),Array.from(d).sort()}),ue=L(()=>{const n=Z.value||[];return{totalImages:n.length,uniqueCameras:g.value==="photography"?Array.from(new Set(n.map(d=>d.camera).filter(d=>d&&d!=="Unknown"))):[],uniqueColors:g.value==="gallery"?Array.from(new Set(n.map(d=>d.color).filter(d=>d))):[],recentUploads:(()=>{const d=new Date,c=new Date(d.getFullYear(),d.getMonth(),1);return n.filter(h=>new Date(h.time)>=c).length})(),events:g.value==="photography"?Array.from(new Set(n.map(d=>{var c;return(c=d.event)==null?void 0:c.name}).filter(d=>d))):[]}}),ge=L(()=>(Z.value||[]).slice(0,20).sort((d,c)=>new Date(c.time).getTime()-new Date(d.time).getTime())),A=async n=>{if(!C.value){C.value=!0;try{const d=await $fetch("/api/gallery",{query:{category:n}});if(d.success&&d.data){const c=(d.data.Img||[]).sort((h,w)=>new Date(w.time).getTime()-new Date(h.time).getTime());n==="gallery"?j.value=c:G.value=c}}catch(d){console.error("Load gallery failed:",d),typeof window<"u"&&(x.value="載入圖片列表失敗，請稍後再試",r.value="error")}finally{C.value=!1}}};return{loading:C,uploading:l,message:x,messageType:r,overviewCategory:g,overviewViewMode:v,uploadCategory:a,manageCategory:$,manageViewMode:Y,selectedEvent:E,expandedEvents:H,editMode:z,editingEventName:s,globalSettings:I,showConfirmDialog:Q,pendingDeleteFilename:B,deleteImageInfo:W,showEventEditDialog:q,editingEventData:F,eventName:p,eventDescription:t,eventLocation:S,selectedFiles:_,galleryData:j,photographyData:G,currentManageData:K,currentOverviewData:Z,groupedManageData:ie,availableEvents:de,overviewStats:ue,recentItems:ge,canUpload:te,loadGalleryByCategory:A,handleOverviewCategoryChange:n=>{g.value=n,(n==="gallery"&&j.value.length===0||n==="photography"&&G.value.length===0)&&A(n)},handleManageCategoryChange:n=>{$.value=n,E.value="",(n==="gallery"&&j.value.length===0||n==="photography"&&G.value.length===0)&&A(n)},handleUploadCategoryChange:n=>{a.value=n,_.value=[],p.value="",t.value="",S.value="",x.value=""},updateGlobalSettings:n=>{I.value={...I.value,...n},typeof window<"u"&&localStorage.setItem("adminSettings",JSON.stringify(I.value))},loadGlobalSettings:()=>{if(typeof window<"u"){const n=localStorage.getItem("adminSettings");if(n)try{I.value={...I.value,...JSON.parse(n)}}catch(d){console.error("Failed to load settings:",d)}}},processFiles:n=>{n.forEach(d=>{if(d.type.startsWith("image/")){const c=new FileReader;c.onload=h=>{var M;const w={file:d,name:d.name,preview:(M=h.target)==null?void 0:M.result,title:d.name.split(".")[0],content:"",color:"blue"};a.value==="photography"&&(w.tags=""),_.value.push(w)},c.readAsDataURL(d)}})},removeFile:n=>{_.value.splice(n,1)},clearFiles:()=>{_.value=[],x.value=""},uploadFiles:async()=>{if(te.value){l.value=!0,x.value="";try{const n=new FormData;n.append("event",p.value),n.append("eventDescription",t.value),n.append("eventLocation",S.value),n.append("category",a.value),_.value.forEach(c=>{n.append("files",c.file),n.append(`title_${c.name}`,c.title),n.append(`content_${c.name}`,c.content),a.value==="photography"?c.tags&&n.append(`tags_${c.name}`,c.tags):n.append(`color_${c.name}`,c.color||"blue")});const d=await $fetch("/api/upload",{method:"POST",body:n});d.success&&(x.value=d.message,r.value="success",_.value=[],p.value="",t.value="",S.value="",await A(a.value))}catch(n){console.error("Upload failed:",n),x.value="上傳失敗，請稍後再試",r.value="error"}finally{l.value=!1}}},toggleEventExpand:n=>{const d=H.value.indexOf(n);d>-1?H.value.splice(d,1):H.value.push(n)},toggleEditMode:()=>{z.value=!z.value,z.value||(s.value="")},startEditEvent:(n,d,c)=>{F.value={originalName:n,name:n,description:d||"",location:c||""},q.value=!0},confirmEditEvent:async n=>{if(F.value){C.value=!0;try{const d=await $fetch("/api/update-event",{method:"PATCH",body:{originalEventName:F.value.originalName,newEventName:n.eventName,newDescription:n.description,newLocation:n.location,category:$.value}});d.success&&(x.value=d.message,r.value="success",q.value=!1,F.value=null,await A($.value))}catch(d){console.error("Update event failed:",d),x.value="更新事件失敗，請稍後再試",r.value="error"}finally{C.value=!1}}},cancelEditEvent:()=>{q.value=!1,F.value=null},showDeleteConfirm:(n,d)=>{W.value={title:d,filename:n},B.value=n,Q.value=!0},confirmDeleteImage:async()=>{if(B.value){C.value=!0,Q.value=!1;try{(await $fetch("/api/delete-image",{method:"DELETE",body:{filename:B.value,category:$.value}})).success&&(x.value="圖片刪除成功",r.value="success",await A($.value))}catch(n){console.error("Delete failed:",n),x.value="刪除失敗，請稍後再試",r.value="error"}finally{C.value=!1,B.value="",W.value=null}}},cancelDeleteImage:()=>{Q.value=!1,B.value="",W.value=null},resetState:()=>{_.value=[],p.value="",t.value="",S.value="",x.value="",r.value="success",l.value=!1,z.value=!1,s.value="",Q.value=!1,B.value="",W.value=null,q.value=!1,F.value=null,E.value=""}}}),ye={class:"space-y-6"},he={key:0,class:"space-y-4"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ce=P({__name:"EventForm",setup(C){const l=R();return(x,r)=>(i(),u("div",ye,[e("div",null,[r[6]||(r[6]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-2"}," 作品分類 ",-1)),b(e("select",{"onUpdate:modelValue":r[0]||(r[0]=g=>o(l).uploadCategory=g),id:"category",onChange:r[1]||(r[1]=g=>o(l).handleUploadCategoryChange(o(l).uploadCategory)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},r[5]||(r[5]=[e("option",{value:"gallery"},"繪圖作品",-1),e("option",{value:"photography"},"攝影作品",-1)]),544),[[D,o(l).uploadCategory]])]),e("div",null,[r[7]||(r[7]=e("label",{for:"event-name",class:"block text-sm font-medium text-gray-700 mb-2"}," 事件名稱 ",-1)),b(e("input",{"onUpdate:modelValue":r[2]||(r[2]=g=>o(l).eventName=g),type:"text",id:"event-name",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"例如：2024創作集、春日街拍"},null,512),[[U,o(l).eventName]])]),o(l).uploadCategory==="photography"?(i(),u("div",he,[e("div",we,[e("div",null,[r[8]||(r[8]=e("label",{for:"event-description",class:"block text-sm font-medium text-gray-700 mb-2"}," 事件描述 ",-1)),b(e("input",{"onUpdate:modelValue":r[3]||(r[3]=g=>o(l).eventDescription=g),type:"text",id:"event-description",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"例如：城市日常生活紀錄"},null,512),[[U,o(l).eventDescription]])]),e("div",null,[r[9]||(r[9]=e("label",{for:"event-location",class:"block text-sm font-medium text-gray-700 mb-2"}," 拍攝地點 ",-1)),b(e("input",{"onUpdate:modelValue":r[4]||(r[4]=g=>o(l).eventLocation=g),type:"text",id:"event-location",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"例如：台北市"},null,512),[[U,o(l).eventLocation]])])])])):y("",!0)]))}}),ke={class:"space-y-2"},_e={class:"text-sm text-gray-600"},$e=P({__name:"FileUploadArea",setup(C){const l=R(),x=f(),r=v=>{const a=v.target;a.files&&l.processFiles(Array.from(a.files))},g=v=>{var a;v.preventDefault(),(a=v.dataTransfer)!=null&&a.files&&l.processFiles(Array.from(v.dataTransfer.files))};return(v,a)=>(i(),u("div",null,[a[6]||(a[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," 選擇圖片 ",-1)),e("div",{onDrop:g,onDragover:a[1]||(a[1]=J(()=>{},["prevent"])),onDragenter:a[2]||(a[2]=J(()=>{},["prevent"])),class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors"},[e("input",{ref_key:"fileInput",ref:x,type:"file",multiple:"",accept:"image/*",onChange:r,class:"hidden"},null,544),e("div",ke,[a[4]||(a[4]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",_e,[e("button",{onClick:a[0]||(a[0]=p=>{var t;return(t=o(x))==null?void 0:t.click()}),class:"font-medium text-blue-600 hover:text-blue-500"}," 點擊選擇檔案 "),a[3]||(a[3]=k(" 或拖拽檔案到這裡 "))]),a[5]||(a[5]=e("p",{class:"text-xs text-gray-500"}," 支援 PNG, JPG, GIF 格式，單檔最大50MB，總計最大200MB ",-1))])],32)]))}}),Me={key:0},Se={class:"text-lg font-medium text-gray-900 mb-4"},Ve={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ee={class:"aspect-w-16 aspect-h-9 mb-3"},ze=["src","alt"],De={class:"space-y-3"},Ue=["onUpdate:modelValue","placeholder"],Ie=["onUpdate:modelValue"],Fe={key:0},Be=["onUpdate:modelValue"],Le={key:1,class:"space-y-2"},Te=["onUpdate:modelValue"],Ne=["onClick"],He=P({__name:"FilePreview",setup(C){const l=R();return(x,r)=>o(l).selectedFiles.length>0?(i(),u("div",Me,[e("h3",Se," 已選擇的圖片 ("+m(o(l).selectedFiles.length)+") ",1),e("div",Ve,[(i(!0),u(T,null,N(o(l).selectedFiles,(g,v)=>(i(),u("div",{key:v,class:"bg-gray-50 rounded-lg p-4"},[e("div",Ee,[e("img",{src:g.preview,alt:g.name,class:"w-full h-48 object-cover rounded-md"},null,8,ze)]),e("div",De,[e("div",null,[r[0]||(r[0]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"}," 標題 ",-1)),b(e("input",{"onUpdate:modelValue":a=>g.title=a,type:"text",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:g.name.split(".")[0]},null,8,Ue),[[U,g.title]])]),e("div",null,[r[1]||(r[1]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"}," 描述 ",-1)),b(e("textarea",{"onUpdate:modelValue":a=>g.content=a,rows:"2",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"圖片描述..."},null,8,Ie),[[U,g.content]])]),o(l).uploadCategory==="gallery"?(i(),u("div",Fe,[r[3]||(r[3]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"}," 顏色標籤 ",-1)),b(e("select",{"onUpdate:modelValue":a=>g.color=a,class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},r[2]||(r[2]=[se('<option value="blue" data-v-5ae95584>藍色</option><option value="red" data-v-5ae95584>紅色</option><option value="green" data-v-5ae95584>綠色</option><option value="yellow" data-v-5ae95584>黃色</option><option value="purple" data-v-5ae95584>紫色</option><option value="orange" data-v-5ae95584>橙色</option><option value="amber" data-v-5ae95584>琥珀色</option>',7)]),8,Be),[[D,g.color]])])):y("",!0),o(l).uploadCategory==="photography"?(i(),u("div",Le,[e("div",null,[r[4]||(r[4]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"}," 額外標籤 (可選) ",-1)),b(e("input",{"onUpdate:modelValue":a=>g.tags=a,type:"text",class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"例如：人像,街拍,藝術"},null,8,Te),[[U,g.tags]]),r[5]||(r[5]=e("p",{class:"text-xs text-gray-500 mt-1"}," 相機設定（ISO、光圈、快門等）會自動從照片讀取 ",-1))])])):y("",!0),e("button",{onClick:a=>o(l).removeFile(v),class:"w-full px-3 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors"}," 移除 ",8,Ne)])]))),128))])])):y("",!0)}}),je=ne(He,[["__scopeId","data-v-5ae95584"]]),Ge={class:"bg-white rounded-xl shadow-sm border border-gray-200"},Ae={key:0,class:"text-center py-12"},Oe={key:1,class:"text-center py-12"},Pe=["onClick"],qe={class:"flex items-center justify-between"},Qe={class:"flex items-center space-x-3"},We={class:"flex items-center space-x-2"},Je={class:"text-base font-medium text-gray-900"},Re={class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Xe={key:0,class:"mt-1 text-sm text-gray-500"},Ye={key:0,class:"ml-2"},Ke=["onClick"],Ze={key:0,class:"p-4"},et={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4"},tt=["src","alt"],lt={key:0,class:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center"},ot=["onClick"],st={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200"},at={class:"text-white text-xs font-medium truncate"},nt={class:"text-white/80 text-xs mt-1"},rt={key:1,class:"space-y-2"},it=["src","alt"],dt={class:"flex-1 min-w-0"},ut={class:"text-sm font-medium text-gray-900 truncate"},gt={class:"text-xs text-gray-500"},pt={key:0,class:"flex-shrink-0"},ct=["onClick"],mt=P({__name:"GalleryView",setup(C){const l=R(),{getImagePath:x}=re(),r=v=>{const a=v.target;a.style.display="none"},g=v=>{try{return new Date(v).toLocaleDateString("zh-TW",{year:"numeric",month:"short",day:"numeric"})}catch{return v}};return(v,a)=>(i(),u("div",Ge,[o(l).loading?(i(),u("div",Ae,a[1]||(a[1]=[se('<div class="inline-flex items-center"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span class="text-gray-500">載入中...</span></div>',1)]))):o(l).groupedManageData.length===0?(i(),u("div",Oe,a[2]||(a[2]=[e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})],-1),e("p",{class:"text-gray-500 mb-2"},"尚無作品",-1),e("p",{class:"text-gray-400 text-sm"},"請先上傳一些圖片",-1)]))):(i(!0),u(T,{key:2},N(o(l).groupedManageData,p=>(i(),u("div",{key:p.eventName,class:V(["bg-gray-50 border border-gray-200 rounded-lg overflow-hidden","mx-6 mb-4",{"mt-6":o(l).groupedManageData.indexOf(p)===0}])},[e("div",{class:"px-4 py-3 bg-white border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:t=>o(l).toggleEventExpand(p.eventName)},[e("div",qe,[e("div",Qe,[(i(),u("svg",{class:V(["w-4 h-4 text-gray-400 transition-transform duration-200",o(l).expandedEvents.includes(p.eventName)?"rotate-90":""]),fill:"currentColor",viewBox:"0 0 20 20"},a[3]||(a[3]=[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)]),2)),e("div",null,[e("div",We,[e("h4",Je,m(p.eventName),1),e("span",Re,m(p.items.length)+" 張 ",1)]),p.description||p.location?(i(),u("div",Xe,[k(m(p.description)+" ",1),p.location?(i(),u("span",Ye,"📍 "+m(p.location),1)):y("",!0)])):y("",!0)])]),e("div",{class:"flex items-center space-x-1",onClick:a[0]||(a[0]=J(()=>{},["stop"]))},[e("button",{onClick:t=>o(l).startEditEvent(p.eventName,p.description,p.location),class:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200",title:"編輯事件"},a[4]||(a[4]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)]),8,Ke),a[5]||(a[5]=e("button",{class:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors duration-200",title:"新增圖片"},[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})])],-1))])])],8,Pe),o(l).expandedEvents.includes(p.eventName)?(i(),u("div",Ze,[o(l).manageViewMode==="grid"?(i(),u("div",et,[(i(!0),u(T,null,N(p.items,t=>(i(),u("div",{key:t.filename,class:"group relative aspect-square bg-gray-100 rounded-lg overflow-hidden hover:shadow-md transition-all duration-200"},[e("img",{src:o(x)(t.filename),alt:t.title,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:r,loading:"lazy"},null,40,tt),o(l).editMode?(i(),u("div",lt,[e("button",{onClick:J(S=>o(l).showDeleteConfirm(t.filename,t.title),["stop"]),class:"opacity-0 group-hover:opacity-100 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all duration-200 transform scale-90 hover:scale-100",title:"刪除圖片"},a[6]||(a[6]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)]),8,ot)])):y("",!0),e("div",st,[e("p",at,m(t.title),1),e("p",nt,m(g(t.time)),1)])]))),128))])):(i(),u("div",rt,[(i(!0),u(T,null,N(p.items,t=>(i(),u("div",{key:t.filename,class:"flex items-center space-x-4 p-3 bg-white rounded-lg border border-gray-200 hover:shadow-sm transition-all duration-200"},[e("img",{src:o(x)(t.filename),alt:t.title,class:"w-12 h-12 object-cover rounded-lg",onError:r,loading:"lazy"},null,40,it),e("div",dt,[e("p",ut,m(t.title),1),e("p",gt,m(g(t.time)),1)]),o(l).editMode?(i(),u("div",pt,[e("button",{onClick:S=>o(l).showDeleteConfirm(t.filename,t.title),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"刪除圖片"},a[7]||(a[7]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)]),8,ct)])):y("",!0)]))),128))]))])):y("",!0)],2))),128))]))}}),vt={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden transform transition-all"},ft={class:"px-6 py-4 border-b border-gray-200"},xt={class:"flex items-center"},bt={class:"text-lg font-semibold text-gray-900"},yt={class:"px-6 py-4"},ht={class:"text-sm text-gray-600 leading-relaxed"},wt={key:0,class:"mt-3 p-3 bg-gray-50 rounded-lg"},Ct={class:"text-xs text-gray-500"},kt=P({__name:"ConfirmDialog",props:{isVisible:{type:Boolean},title:{default:"確認操作"},message:{default:"您確定要執行此操作嗎？"},details:{default:""}},emits:["confirm","cancel"],setup(C,{emit:l}){const x=l,r=()=>{x("confirm")},g=()=>{x("cancel")};return ae(()=>{const v=a=>{a.key==="Escape"&&g()};document.addEventListener("keydown",v),me(()=>{document.removeEventListener("keydown",v)})}),(v,a)=>(i(),ve(fe,{to:"body"},[v.isVisible?(i(),u("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:J(g,["self"])},[e("div",vt,[e("div",ft,[e("div",xt,[a[0]||(a[0]=e("div",{class:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3"},[e("svg",{class:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",null,[e("h3",bt,m(v.title),1)])])]),e("div",yt,[e("p",ht,m(v.message),1),v.details?(i(),u("div",wt,[e("p",Ct,m(v.details),1)])):y("",!0)]),e("div",{class:"px-6 py-4 bg-gray-50 flex justify-end space-x-3"},[e("button",{onClick:g,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors"}," 取消 "),e("button",{onClick:r,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"}," 確定刪除 ")])])])):y("",!0)]))}}),_t={class:"min-h-screen bg-gray-50"},$t={class:"bg-white shadow-sm border-b"},Mt={class:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"},St={class:"max-w-7xl mx-auto px-6 pt-6"},Vt={class:"bg-white rounded-t-xl shadow-sm border-b border-gray-200"},Et={class:"flex space-x-8 px-6"},zt=["onClick"],Dt={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Ut={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},It={key:2,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Ft={key:3,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Bt={key:4,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Lt={class:"max-w-7xl mx-auto px-6 pb-8"},Tt={class:"bg-white rounded-b-xl shadow-sm"},Nt={key:0,class:"p-8"},Ht={class:"mb-8 flex justify-between items-start"},jt={class:"flex items-center space-x-4"},Gt={class:"flex items-center space-x-2"},At={class:"flex items-center space-x-2"},Ot={class:"flex items-center bg-gray-100 rounded-lg p-1"},Pt={class:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8"},qt={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200"},Qt={class:"flex items-center justify-between"},Wt={class:"text-2xl font-bold text-blue-900"},Jt={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border border-green-200"},Rt={class:"flex items-center justify-between"},Xt={class:"text-2xl font-bold text-green-900"},Yt={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-200"},Kt={class:"flex items-center justify-between"},Zt={class:"text-purple-600 text-sm font-medium"},el={class:"text-2xl font-bold text-purple-900"},tl={class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-6 border border-orange-200"},ll={class:"flex items-center justify-between"},ol={class:"text-2xl font-bold text-orange-900"},sl={class:"mt-8"},al={key:0,class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},nl=["title"],rl=["src","alt"],il={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200"},dl={class:"text-white text-xs font-medium truncate"},ul={class:"text-white/80 text-xs mt-1"},gl={key:1,class:"text-center py-12 text-gray-500"},pl={key:1,class:"p-8"},cl={class:"mb-8 flex justify-between items-start"},ml={class:"flex items-center space-x-2"},vl={class:"space-y-8"},fl={class:"flex justify-end space-x-4 pt-6 border-t border-gray-200"},xl=["disabled"],bl={key:0,class:"flex items-center"},yl={key:1},hl={key:0,class:"ml-1 px-2 py-0.5 bg-blue-500 text-xs text-white rounded-full"},wl={key:0,class:"mt-6"},Cl={class:"flex items-start"},kl={key:0,class:"w-5 h-5 text-green-400 mt-0.5 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},_l={key:1,class:"w-5 h-5 text-red-400 mt-0.5 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},$l={key:2,class:"p-8"},Ml={class:"mb-6 flex justify-between items-start"},Sl={class:"flex items-center space-x-4"},Vl={class:"flex items-center space-x-2"},El={class:"flex items-center space-x-2"},zl=["value"],Dl={class:"flex items-center space-x-2"},Ul={class:"flex items-center bg-gray-100 rounded-lg p-1"},Il={key:0,class:"w-4 h-4 inline mr-2",fill:"currentColor",viewBox:"0 0 20 20"},Fl={key:1,class:"w-4 h-4 inline mr-2",fill:"currentColor",viewBox:"0 0 20 20"},Bl={class:"mb-6 flex items-center space-x-4 text-sm text-gray-600 bg-gray-50 rounded-lg px-4 py-3"},Ll={class:"font-medium text-gray-900"},Tl={class:"font-medium text-gray-900"},Nl={key:0,class:"text-gray-300"},Hl={key:1,class:"text-blue-600 font-medium"},jl={key:3,class:"p-8"},Gl={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Al={class:"bg-gray-50 rounded-lg p-6"},Ol={class:"space-y-4"},Pl={class:"flex space-x-4"},ql={class:"flex items-center"},Ql={class:"flex items-center"},Wl={class:"bg-gray-50 rounded-lg p-6"},Jl={class:"space-y-4"},Rl={class:"block text-sm font-medium text-gray-700 mb-2"},Xl={class:"block text-sm font-medium text-gray-700 mb-2"},Yl={class:"bg-gray-50 rounded-lg p-6"},Kl={class:"space-y-4"},Zl={class:"flex items-center justify-between"},eo={class:"relative inline-flex items-center cursor-pointer"},to={class:"flex items-center justify-between"},lo={class:"relative inline-flex items-center cursor-pointer"},oo={class:"bg-gray-50 rounded-lg p-6"},so={class:"space-y-4"},ao={class:"flex space-x-4"},no={class:"flex items-center"},ro={class:"flex items-center"},io=P({__name:"admin",setup(C){const l=R(),{getImagePath:x}=re(),r=f("overview"),g=f([{id:"overview",name:"概覽"},{id:"upload",name:"上傳"},{id:"manage",name:"管理"},{id:"settings",name:"設定"}]),v=p=>{const t=p.target;t.style.display="none"},a=p=>{try{return new Date(p).toLocaleDateString("zh-TW",{year:"numeric",month:"short",day:"numeric"})}catch{return p}};return ae(async()=>{try{l.loadGlobalSettings(),await Promise.all([l.loadGalleryByCategory("gallery"),l.loadGalleryByCategory("photography")]),await xe(),l.groupedManageData.length>0&&(l.expandedEvents=[l.groupedManageData[0].eventName])}catch(p){console.error("Failed to initialize admin page:",p)}}),(p,t)=>{var z;const S=pe,_=Ce,$=$e,Y=je,E=mt,H=kt;return i(),u("div",_t,[e("header",$t,[e("div",Mt,[t[36]||(t[36]=e("h1",{class:"text-2xl font-bold text-gray-900"},"後台管理系統",-1)),O(S,{to:"/",class:"text-gray-600 hover:text-gray-900"},{default:be(()=>t[35]||(t[35]=[k("返回首頁")])),_:1,__:[35]})])]),e("nav",St,[e("div",Vt,[e("div",Et,[(i(!0),u(T,null,N(g.value,s=>(i(),u("button",{key:s.id,onClick:I=>r.value=s.id,class:V(["py-4 px-1 border-b-2 font-medium text-sm transition-all duration-200 flex items-center space-x-2",r.value===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[s.id==="overview"?(i(),u("svg",Dt,t[37]||(t[37]=[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"},null,-1)]))):s.id==="upload"?(i(),u("svg",Ut,t[38]||(t[38]=[e("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)]))):s.id==="manage"?(i(),u("svg",It,t[39]||(t[39]=[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},null,-1)]))):s.id==="settings"?(i(),u("svg",Ft,t[40]||(t[40]=[e("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"},null,-1)]))):y("",!0),e("span",null,m(s.name),1),s.id==="upload"&&o(l).selectedFiles.length>0?(i(),u("span",Bt,m(o(l).selectedFiles.length),1)):y("",!0)],10,zt))),128))])])]),e("main",Lt,[e("div",Tt,[r.value==="overview"?(i(),u("section",Nt,[e("header",Ht,[t[44]||(t[44]=e("div",null,[e("h2",{class:"text-2xl font-light text-gray-900 mb-2"},"系統概覽"),e("p",{class:"text-gray-600"},"查看整體數據統計和最近活動")],-1)),e("div",jt,[e("div",Gt,[t[42]||(t[42]=e("label",{class:"text-sm font-medium text-gray-700"},"分類：",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(l).overviewCategory=s),onChange:t[1]||(t[1]=s=>o(l).handleOverviewCategoryChange(o(l).overviewCategory)),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[41]||(t[41]=[e("option",{value:"gallery"},"繪圖作品",-1),e("option",{value:"photography"},"攝影作品",-1)]),544),[[D,o(l).overviewCategory]])]),e("div",At,[t[43]||(t[43]=e("label",{class:"text-sm font-medium text-gray-700"},"檢視：",-1)),e("div",Ot,[e("button",{onClick:t[2]||(t[2]=s=>o(l).overviewViewMode="grid"),class:V(["p-1.5 rounded-md transition-all duration-200 text-xs",o(l).overviewViewMode==="grid"?"bg-white text-gray-700 shadow-sm":"text-gray-400 hover:text-gray-600"])}," 網格 ",2),e("button",{onClick:t[3]||(t[3]=s=>o(l).overviewViewMode="list"),class:V(["p-1.5 rounded-md transition-all duration-200 text-xs",o(l).overviewViewMode==="list"?"bg-white text-gray-700 shadow-sm":"text-gray-400 hover:text-gray-600"])}," 列表 ",2)])])])]),e("div",Pt,[e("div",qt,[e("div",Qt,[e("div",null,[t[45]||(t[45]=e("p",{class:"text-blue-600 text-sm font-medium"},"總圖片數",-1)),e("p",Wt,m(o(l).overviewStats.totalImages),1)]),t[46]||(t[46]=e("svg",{class:"w-8 h-8 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})],-1))])]),e("div",Jt,[e("div",Rt,[e("div",null,[t[47]||(t[47]=e("p",{class:"text-green-600 text-sm font-medium"},"本月新增",-1)),e("p",Xt,m(o(l).overviewStats.recentUploads),1)]),t[48]||(t[48]=e("svg",{class:"w-8 h-8 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1))])]),e("div",Yt,[e("div",Kt,[e("div",null,[e("p",Zt,m(o(l).overviewCategory==="photography"?"相機數量":"色彩數量"),1),e("p",el,m(o(l).overviewCategory==="photography"?o(l).overviewStats.uniqueCameras.length:o(l).overviewStats.uniqueColors.length),1)]),t[49]||(t[49]=e("svg",{class:"w-8 h-8 text-purple-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1))])]),e("div",tl,[e("div",ll,[e("div",null,[t[50]||(t[50]=e("p",{class:"text-orange-600 text-sm font-medium"},"事件數量",-1)),e("p",ol,m(o(l).overviewStats.events.length||1),1)]),t[51]||(t[51]=e("svg",{class:"w-8 h-8 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})],-1))])])]),e("section",sl,[t[54]||(t[54]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"最近上傳的作品",-1)),o(l).recentItems.length>0?(i(),u("div",al,[(i(!0),u(T,null,N(o(l).recentItems.slice(0,12),s=>(i(),u("div",{key:s.filename,class:"group relative aspect-square rounded-lg overflow-hidden bg-gray-100 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer",title:s.title},[e("img",{src:o(x)(s.filename),alt:s.title,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:v,loading:"lazy"},null,40,rl),t[52]||(t[52]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200"},null,-1)),e("div",il,[e("p",dl,m(s.title),1),e("p",ul,m(a(s.time)),1)])],8,nl))),128))])):(i(),u("div",gl,t[53]||(t[53]=[e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})],-1),e("p",null,"尚無上傳的作品",-1)])))])])):y("",!0),r.value==="upload"?(i(),u("section",pl,[e("header",cl,[t[57]||(t[57]=e("div",null,[e("h2",{class:"text-2xl font-light text-gray-900 mb-2"},"上傳作品"),e("p",{class:"text-gray-600"},"新增圖片到您的作品集")],-1)),e("div",ml,[t[56]||(t[56]=e("label",{class:"text-sm font-medium text-gray-700"},"分類：",-1)),b(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o(l).uploadCategory=s),onChange:t[5]||(t[5]=s=>o(l).handleUploadCategoryChange(o(l).uploadCategory)),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[55]||(t[55]=[e("option",{value:"gallery"},"繪圖作品",-1),e("option",{value:"photography"},"攝影作品",-1)]),544),[[D,o(l).uploadCategory]])])]),e("div",vl,[O(_),O($),O(Y),e("div",fl,[e("button",{onClick:t[6]||(t[6]=(...s)=>o(l).clearFiles&&o(l).clearFiles(...s)),class:"px-6 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200"}," 清除所有 "),e("button",{onClick:t[7]||(t[7]=(...s)=>o(l).uploadFiles&&o(l).uploadFiles(...s)),disabled:!o(l).canUpload||o(l).uploading,class:"px-6 py-2.5 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"},[o(l).uploading?(i(),u("span",bl,t[58]||(t[58]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),k(" 上傳中... ")]))):(i(),u("span",yl,[t[59]||(t[59]=k(" 上傳圖片 ")),o(l).selectedFiles.length>0?(i(),u("span",hl,m(o(l).selectedFiles.length),1)):y("",!0)]))],8,xl)]),o(l).message?(i(),u("div",wl,[e("div",{class:V(["p-4 rounded-lg border",o(l).messageType==="success"?"bg-green-50 text-green-800 border-green-200":"bg-red-50 text-red-800 border-red-200"])},[e("div",Cl,[o(l).messageType==="success"?(i(),u("svg",kl,t[60]||(t[60]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):(i(),u("svg",_l,t[61]||(t[61]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))),e("span",null,m(o(l).message),1)])],2)])):y("",!0)])])):y("",!0),r.value==="manage"?(i(),u("section",$l,[e("header",Ml,[t[69]||(t[69]=e("div",null,[e("h2",{class:"text-2xl font-light text-gray-900 mb-2"},"管理作品"),e("p",{class:"text-gray-600"},"編輯和管理您的作品集")],-1)),e("div",Sl,[e("div",Vl,[t[63]||(t[63]=e("label",{class:"text-sm font-medium text-gray-700"},"分類：",-1)),b(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(l).manageCategory=s),onChange:t[9]||(t[9]=s=>o(l).handleManageCategoryChange(o(l).manageCategory)),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[62]||(t[62]=[e("option",{value:"gallery"},"繪圖作品",-1),e("option",{value:"photography"},"攝影作品",-1)]),544),[[D,o(l).manageCategory]])]),e("div",El,[t[65]||(t[65]=e("label",{class:"text-sm font-medium text-gray-700"},"事件：",-1)),b(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>o(l).selectedEvent=s),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[64]||(t[64]=e("option",{value:""},"所有事件",-1)),(i(!0),u(T,null,N(o(l).availableEvents,s=>(i(),u("option",{key:s,value:s},m(s),9,zl))),128))],512),[[D,o(l).selectedEvent]])]),e("div",Dl,[t[66]||(t[66]=e("label",{class:"text-sm font-medium text-gray-700"},"檢視：",-1)),e("div",Ul,[e("button",{onClick:t[11]||(t[11]=s=>o(l).manageViewMode="grid"),class:V(["p-1.5 rounded-md transition-all duration-200 text-xs",o(l).manageViewMode==="grid"?"bg-white text-gray-700 shadow-sm":"text-gray-400 hover:text-gray-600"])}," 網格 ",2),e("button",{onClick:t[12]||(t[12]=s=>o(l).manageViewMode="list"),class:V(["p-1.5 rounded-md transition-all duration-200 text-xs",o(l).manageViewMode==="list"?"bg-white text-gray-700 shadow-sm":"text-gray-400 hover:text-gray-600"])}," 列表 ",2)])]),e("button",{onClick:t[13]||(t[13]=(...s)=>o(l).toggleEditMode&&o(l).toggleEditMode(...s)),class:V(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200",o(l).editMode?"bg-red-100 text-red-700 hover:bg-red-200 border border-red-200":"bg-blue-100 text-blue-700 hover:bg-blue-200 border border-blue-200"])},[o(l).editMode?(i(),u("svg",Il,t[67]||(t[67]=[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(i(),u("svg",Fl,t[68]||(t[68]=[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},null,-1)]))),k(" "+m(o(l).editMode?"退出編輯":"編輯模式"),1)],2),e("button",{onClick:t[14]||(t[14]=s=>o(l).loadGalleryByCategory(o(l).manageCategory)),class:"px-3 py-2 text-sm text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200"}," 重新載入 ")])]),e("div",Bl,[e("span",null,[t[70]||(t[70]=k("共 ")),e("span",Ll,m(o(l).currentManageData.length),1),t[71]||(t[71]=k(" 張圖片"))]),t[73]||(t[73]=e("span",{class:"text-gray-300"},"•",-1)),e("span",null,[e("span",Tl,m(o(l).groupedManageData.length),1),t[72]||(t[72]=k(" 個事件"))]),o(l).selectedEvent?(i(),u("span",Nl,"•")):y("",!0),o(l).selectedEvent?(i(),u("span",Hl," 篩選："+m(o(l).selectedEvent),1)):y("",!0)]),O(E)])):y("",!0),r.value==="settings"?(i(),u("section",jl,[t[94]||(t[94]=e("header",{class:"mb-8"},[e("h2",{class:"text-2xl font-light text-gray-900 mb-2"},"系統設定"),e("p",{class:"text-gray-600"},"配置系統偏好和功能選項")],-1)),e("div",Gl,[e("div",Al,[t[79]||(t[79]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"預設設定",-1)),e("div",Ol,[e("div",null,[t[75]||(t[75]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"預設分類",-1)),b(e("select",{"onUpdate:modelValue":t[15]||(t[15]=s=>o(l).globalSettings.defaultUploadCategory=s),onChange:t[16]||(t[16]=s=>o(l).updateGlobalSettings({defaultUploadCategory:o(l).globalSettings.defaultUploadCategory})),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[74]||(t[74]=[e("option",{value:"gallery"},"繪圖作品",-1),e("option",{value:"photography"},"攝影作品",-1)]),544),[[D,o(l).globalSettings.defaultUploadCategory]])]),e("div",null,[t[78]||(t[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"預設檢視模式",-1)),e("div",Pl,[e("label",ql,[b(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>o(l).globalSettings.defaultViewMode=s),type:"radio",value:"grid",class:"mr-2 text-blue-600 focus:ring-blue-500",onChange:t[18]||(t[18]=s=>o(l).updateGlobalSettings({defaultViewMode:"grid"}))},null,544),[[X,o(l).globalSettings.defaultViewMode]]),t[76]||(t[76]=k(" 網格檢視 "))]),e("label",Ql,[b(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>o(l).globalSettings.defaultViewMode=s),type:"radio",value:"list",class:"mr-2 text-blue-600 focus:ring-blue-500",onChange:t[20]||(t[20]=s=>o(l).updateGlobalSettings({defaultViewMode:"list"}))},null,544),[[X,o(l).globalSettings.defaultViewMode]]),t[77]||(t[77]=k(" 列表檢視 "))])])])])]),e("div",Wl,[t[82]||(t[82]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"圖片處理",-1)),e("div",Jl,[e("div",null,[e("label",Rl," 圖片品質："+m(o(l).globalSettings.imageQuality)+"% ",1),b(e("input",{"onUpdate:modelValue":t[21]||(t[21]=s=>o(l).globalSettings.imageQuality=s),type:"range",min:"60",max:"100",step:"5",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",onChange:t[22]||(t[22]=s=>o(l).updateGlobalSettings({imageQuality:parseInt(o(l).globalSettings.imageQuality.toString())}))},null,544),[[U,o(l).globalSettings.imageQuality]]),t[80]||(t[80]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"60%"),e("span",null,"100%")],-1))]),e("div",null,[e("label",Xl," 批次處理大小："+m(o(l).globalSettings.batchSize),1),b(e("input",{"onUpdate:modelValue":t[23]||(t[23]=s=>o(l).globalSettings.batchSize=s),type:"range",min:"10",max:"50",step:"5",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",onChange:t[24]||(t[24]=s=>o(l).updateGlobalSettings({batchSize:parseInt(o(l).globalSettings.batchSize.toString())}))},null,544),[[U,o(l).globalSettings.batchSize]]),t[81]||(t[81]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"10"),e("span",null,"50")],-1))])])]),e("div",Yl,[t[87]||(t[87]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"系統功能",-1)),e("div",Kl,[e("div",Zl,[t[84]||(t[84]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"自動備份"),e("p",{class:"text-xs text-gray-500"},"自動備份上傳的圖片")],-1)),e("label",eo,[b(e("input",{"onUpdate:modelValue":t[25]||(t[25]=s=>o(l).globalSettings.autoBackup=s),type:"checkbox",class:"sr-only peer",onChange:t[26]||(t[26]=s=>o(l).updateGlobalSettings({autoBackup:o(l).globalSettings.autoBackup}))},null,544),[[oe,o(l).globalSettings.autoBackup]]),t[83]||(t[83]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),e("div",to,[t[86]||(t[86]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-700"},"顯示圖片資訊"),e("p",{class:"text-xs text-gray-500"},"在預覽中顯示 EXIF 資訊")],-1)),e("label",lo,[b(e("input",{"onUpdate:modelValue":t[27]||(t[27]=s=>o(l).globalSettings.showImageInfo=s),type:"checkbox",class:"sr-only peer",onChange:t[28]||(t[28]=s=>o(l).updateGlobalSettings({showImageInfo:o(l).globalSettings.showImageInfo}))},null,544),[[oe,o(l).globalSettings.showImageInfo]]),t[85]||(t[85]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])])]),e("div",oo,[t[93]||(t[93]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"介面偏好",-1)),e("div",so,[e("div",null,[t[90]||(t[90]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"主題",-1)),e("div",ao,[e("label",no,[b(e("input",{"onUpdate:modelValue":t[29]||(t[29]=s=>o(l).globalSettings.theme=s),type:"radio",value:"light",class:"mr-2 text-blue-600 focus:ring-blue-500",onChange:t[30]||(t[30]=s=>o(l).updateGlobalSettings({theme:"light"}))},null,544),[[X,o(l).globalSettings.theme]]),t[88]||(t[88]=k(" 淺色 "))]),e("label",ro,[b(e("input",{"onUpdate:modelValue":t[31]||(t[31]=s=>o(l).globalSettings.theme=s),type:"radio",value:"dark",class:"mr-2 text-blue-600 focus:ring-blue-500",onChange:t[32]||(t[32]=s=>o(l).updateGlobalSettings({theme:"dark"}))},null,544),[[X,o(l).globalSettings.theme]]),t[89]||(t[89]=k(" 深色 "))])])]),e("div",null,[t[92]||(t[92]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"語言",-1)),b(e("select",{"onUpdate:modelValue":t[33]||(t[33]=s=>o(l).globalSettings.language=s),onChange:t[34]||(t[34]=s=>o(l).updateGlobalSettings({language:o(l).globalSettings.language})),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[91]||(t[91]=[e("option",{value:"zh-TW"},"繁體中文",-1),e("option",{value:"zh-CN"},"简体中文",-1),e("option",{value:"en-US"},"English",-1)]),544),[[D,o(l).globalSettings.language]])])])])])])):y("",!0)])]),O(H,{"is-visible":o(l).showConfirmDialog,title:"刪除圖片",message:`您確定要刪除圖片「${(z=o(l).deleteImageInfo)==null?void 0:z.title}」嗎？`,details:"此操作無法復原，圖片將從檔案系統和資料庫中永久移除。",onConfirm:o(l).confirmDeleteImage,onCancel:o(l).cancelDeleteImage},null,8,["is-visible","message","onConfirm","onCancel"])])}}}),Uo=ne(io,[["__scopeId","data-v-1bca8ee2"]]);export{Uo as default};
